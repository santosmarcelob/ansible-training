[Interface]
Address = {{ ansible_host == 'rt-europa' | ternary('10.200.0.1/24', '10.200.0.2/24') }}
PrivateKey = {{ lookup('file', '/etc/wireguard/privatekey') }}
ListenPort = 51871

[Peer]
PublicKey = {{ hostvars[groups['rt-europa', 'rt-america'] | difference([inventory_hostname])[0]]['public_key']['stdout'] }}
Endpoint = {{ hostvars[groups['rt-europa', 'rt-america'] | difference([inventory_hostname])[0]]['ansible_host'] }}:51871
AllowedIPs = 192.168.0.0/16
PersistentKeepalive = 25
